/* =========================
   GLOBAL FIX: tránh scroll ngang (Angular component styles bị scoped)
   Dùng ::ng-deep để áp vào html/body thực sự.
   ========================= */
:host { display: block; max-width: 100%; }

:host ::ng-deep html,
:host ::ng-deep body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden; /* fallback */
  overflow-x: clip;   /* modern browsers: chặn tràn mà không tạo scroll */
}

/* Box sizing đồng bộ */
:host,
:host * {
  box-sizing: border-box;
}

/* Chặn mọi phần tử header không vượt viewport */
.header,
.header__top,
.navigation,
.navigation--mobile,
.ps-search--mobile,
.ps-panel--sidebar,
.navigation__overlay {
  max-width: 100%;
  overflow-x: clip;
}

/* .ps-container của theme đôi khi có width cố định / margin âm -> gây tràn */
.ps-container {
  width: 100%;
  max-width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  overflow-x: clip;
}

/* Media inline (svg/img) */
svg, img {
  max-width: 100%;
  height: auto;
}

/* ===== Fix scroll khi mở menu mobile ===== */
.no-scroll { overflow: hidden; }

/* ===== Helpers ===== */
.mobile-only { display: none; }
.desktop-only { display: block; }

/* ===== Show/Hide desktop vs mobile header ===== */
.header--mobile { display: none; }

/* ===== Desktop header layout (giữ không vỡ ở độ rộng vừa) ===== */
.header__top .ps-container{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  min-width: 0; /* quan trọng: flex item không tạo overflow */
}

.header__left{
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 0;
}

.header__center{
  flex: 1 1 auto;
  min-width: 240px;
}

.header__right{
  display: flex;
  align-items: center;
  flex: 0 0 auto;
  min-width: 0;
}

/* Tránh input search bị tràn */
.ps-form--quick-search{
  display: flex;
  align-items: center;
  width: 100%;
  min-width: 0;
}
.ps-form--quick-search .form-control{
  width: 100%;
  min-width: 0;
}

/* Logo svg scale theo container */
.ps-logo{
  display: inline-flex;
  align-items: center;
  min-width: 0;
  max-width: 100%;
}
.header__logo-img{
  height: auto;
  max-width: 100%;
}

/* ===== Menu danh mục: tránh text dài gây overflow ===== */
.menu--product-categories,
.menu--product-categories .menu__toggle{
  max-width: 100%;
  min-width: 0;
}
.menu--product-categories .menu__toggle span{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 240px;
  display: inline-block;
}

/* ===== Mobile header layout ===== */
.header--mobile .navigation--mobile{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  max-width: 100%;
}

.header--mobile .navigation__left,
.header--mobile .navigation__right{
  display: flex;
  align-items: center;
  min-width: 0;
}

.header--mobile .navigation__left{ gap: 12px; }
.header--mobile .navigation__right{ flex: 0 0 auto; }

/* ===== Logo ===== */
.header__logo-img { width: 150px; }

/* ===== Action icons ===== */
.navigation__right .header__actions,
.header__actions {
  display:flex;
  align-items:center;
  gap:18px;
  min-width: 0;
}

.header__extra, .ps-block__left a {
  font-size: 24px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 auto;
}

/* Badge cart/fav nếu theme của bạn dùng span i */
.ps-cart--mini { position: relative; }

/* ===== Search bar (mobile) ===== */
.ps-search--mobile {
  display:block !important;
  padding: 0 15px;
  margin-top: 10px;
  max-width: 100%;
}
.ps-form--search-mobile {
  position: relative;
  width: 100%;
  max-width: 100%;
}
.ps-form--search-mobile .form-control {
  width: 100%;
  height: 40px;
  background-color: #fff;
  border: none;
  border-radius: 20px;
  padding-left: 16px;
  padding-right: 45px;
  font-size: 14px;
  color: #333;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}
.ps-form--search-mobile button {
  position: absolute;
  top: 50%;
  right: 5px;
  transform: translateY(-50%);
  width: 32px;
  height: 32px;
  border: none;
  background: #222;
  color: #ff7337;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

/* =========================
   RESPONSIVE
   ========================= */

/* ---------- TABLET (iPad): 768px - 1199px ----------
   Dùng header desktop, nhưng xếp layout gọn và ẩn navigation bar.
*/
@media (min-width: 768px) and (max-width: 1199px) {

  .header--1 { display: block !important; }
  .header--mobile { display: none !important; }

  .navigation { display: none !important; }

  .header__top .ps-container{
    gap: 12px;
    padding-left: 16px;
    padding-right: 16px;
    flex-wrap: wrap;
  }

  .header__left{
    flex: 0 0 auto;
    order: 1;
  }
  .header__right{
    flex: 0 0 auto;
    order: 2;
  }
  .header__center{
    flex: 1 1 100%;
    min-width: 0;
    order: 3;
    margin-top: 8px;
  }

  .header__logo-img { width: 150px; }

  /* iPad: ẩn chữ “MUA SẮM…” để khỏi tràn */
  .menu--product-categories .menu__toggle span {
    display: none;
  }

  .ps-form--quick-search{ width: 100%; }

  .header__actions{ gap: 14px; }

  /* chặn flex overflow thêm */
  .header__top, .ps-container, .header__left, .header__right, .header__center {
    min-width: 0;
  }
}

/* ---------- MOBILE: <= 767px ---------- */
@media (max-width: 767px) {

  .header--1, .navigation { display: none !important; }
  .header--mobile { display: block !important; }

  .header--mobile {
    background-color: #ff7337;
    z-index: 1000;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  .ps-toggle--sidebar {
    font-size: 26px;
    color: #222;
    cursor: pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    width:40px;
    height:40px;
    border-radius:10px;
    background: rgba(255,255,255,0.35);
    flex: 0 0 auto;
  }

  .header__logo-img { width: 130px; }

  .navigation__right .header__actions {
    gap: 12px;
    flex-wrap: nowrap;
  }

  .ps-search--mobile {
    display:block !important;
    padding: 0 12px 12px;
    margin-top: 0;
  }

  .ps-panel--sidebar { z-index: 10001; }
  .navigation__overlay { z-index: 10000; }

  .desktop-only { display: none !important; }
  .mobile-only { display: inline-flex !important; }
}

@media (max-width: 576px) {
  .header__logo-img { width: 115px; }
  .header--mobile .navigation--mobile{ padding: 8px 10px; }
  .navigation__right .header__actions{ gap: 10px; }
  .ps-toggle--sidebar{ width: 38px; height: 38px; }
}

@media (max-width: 375px) {
  .header__extra, .ps-block__left a { font-size: 22px; }
  .header__logo-img { width: 105px; }
}

/* ===================================================================
   SIDEBAR MENU (Mobile slide)
   =================================================================== */
.ps-panel--sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: min(320px, 80vw);
  max-width: 80vw;
  height: 100vh;
  background: #fff;
  z-index: 99999;
  transform: translateX(-100%);
  transition: transform 0.35s ease;
  box-shadow: 4px 0 15px rgba(0,0,0,0.12);
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}
.ps-panel--sidebar.active { transform: translateX(0); }

.ps-panel__header {
  background: #ff7337;
  padding: 16px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.ps-panel__header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 800;
  text-transform: uppercase;
  color: #222;
  letter-spacing: 1px;
}
.ps-btn--close { font-size: 24px; color: #222; opacity: 0.8; }

.ps-panel__content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 10px 0;
}

.menu--mobile {
  list-style: none;
  padding: 0;
  margin: 0;
}

.menu--mobile > li { border-bottom: 1px solid #f1f1f1; }

.menu--mobile > li > a {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  color: #333;
  font-size: 15px;
  font-weight: 500;
  text-decoration: none;
}
.menu--mobile > li > a i { font-size: 12px; color: #999; }

.sub-menu {
  background: #fcfcfc;
  list-style: none;
  padding: 0;
  display: none;
}
.sub-menu li a {
  display: block;
  padding: 12px 16px 12px 28px;
  color: #555;
  font-size: 14px;
  border-bottom: 1px dashed #eee;
}

/* Overlay */
.navigation__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0; /* thêm để khỏi lệch */
  bottom: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  z-index: 9999;
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.25s ease;
  backdrop-filter: blur(2px);
}
.navigation__overlay.active {
  visibility: visible;
  opacity: 1;
}

